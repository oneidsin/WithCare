<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
   <mapper namespace="com.withcare.post.dao.PostDAO">
   		
   		<insert id="postWrite" parameterType="com.withcare.post.dto.PostDTO">
   			INSERT INTO post(post_title, post_content) 
   				VALUES (#{post_title}, #{post_content})
   		</insert>
   		
   		<update id="postUpdate" parameterType="com.withcare.post.dto.PostDTO">
   			UPDATE post SET post_title = #{post_title}, post_content = #{post_content} WHERE post_idx = #{post_idx}
   		</update>
   		
   		<update id="postDelete">
   			UPDATE post SET post_blind_yn = #{post_blind_yn} WHERE post_idx = #{post_idx}
   		</update>
   		
   		<select id="postDetail" parameterType="com.withcare.post.dto.PostDTO">
   			SELECT * FROM post WHERE post_idx=#{param1}
   		</select>
   		
   		<update id="upHit">
   			UPDATE post SET post_view_cnt = post_view_cnt+1 WHERE post_idx = #{post_idx}
   		</update>
   		
   		<select id="postList" resultType="com.withcare.post.dto.PostDTO">
			SELECT 
			p.post_idx
			,p.post_title
			,p.post_content
			,p.post_view_cnt
			,p.com_yn
			,p.post_create_date
			,p.post_update_date
			,post_blind_yn
			FROM post p ORDER BY p.post_idx DESC
			LIMIT #{param2} OFFSET #{param1}
		</select>
   		
   		<select id="postPages" resultType="int">
			SELECT COUNT(*) FROM post
		</select>
   		
   </mapper>